# CSV 数据分析助手

基于 FastAPI 和 LLM 的智能数据分析系统，支持自然语言交互的数据分析和可视化。

## 系统架构

mermaid
graph LR
A[前端] --> B[文件上传]
B --> C[Python 后端]
A --> D[对话请求]
D --> C
C --> E[数据处理/Pandas]
C --> F[LLM 分析]
C --> G[返回结果]
G --> H[前端可视化]

## 功能清单和实现状态

### 1. 基础架构 ✅

- [x] FastAPI 后端框架搭建
- [x] 环境变量配置
- [x] CORS 支持
- [x] 错误处理机制
- [x] 依赖注入系统

### 2. 文件处理 ✅

- [x] CSV 文件上传
- [x] 文件大小验证
- [x] 文件类型验证
- [x] 基础数据统计
- [x] 文件存储管理

### 3. 数据处理 🟡

- [x] Pandas 基础操作支持
- [x] 数据类型自动识别
- [ ] 数据清洗功能
- [ ] 数据转换功能
- [ ] 高级统计分析

### 4. LLM 集成 🟡

- [x] OpenAI API 集成
- [x] 系统提示词设计
- [x] JSON 响应格式化
- [ ] 错误重试机制
- [ ] 响应验证机制
- [ ] Token 使用优化

### 5. 上下文管理 ✅

- [x] Redis 会话存储
- [x] 上下文注入
- [x] 历史查询记录
- [x] 会话过期机制

### 6. 分析能力 🟠

- [ ] 常见统计分析
- [ ] 相关性分析
- [ ] 时间序列分析
- [ ] 分组聚合分析
- [ ] 自定义分析逻辑

### 7. 交互优化 🟠

- [x] 结构化输出
- [x] 错误提示
- [ ] 分析建议生成
- [ ] 追问机制
- [ ] 分析逻辑解释

### 8. 数据可视化 🔴

- [ ] 图表类型推荐
- [ ] 可视化参数生成
- [ ] 多维度展示
- [ ] 交互式图表配置

### 9. 安全性 🟡

- [x] 文件大小限制
- [x] 文件类型验证
- [ ] 数据访问控制
- [ ] 用户认证
- [ ] API 限流

### 10. 业务集成 🔴

- [ ] 业务领域知识库
- [ ] 自定义分析模板
- [ ] 分析结果导出
- [ ] 批量处理能力
- [ ] 定时分析任务

## 待实现的核心功能

1. **数据处理增强**

   - 实现数据清洗功能
   - 添加高级统计分析
   - 支持更多数据转换操作

2. **LLM 交互优化**

   - 完善错误重试机制
   - 优化 Token 使用
   - 增强响应验证

3. **分析能力扩展**

   - 实现各类统计分析方法
   - 添加时间序列分析
   - 支持复杂的分组聚合

4. **可视化支持**

   - 实现图表推荐系统
   - 生成可视化配置
   - 支持交互式图表

5. **业务集成**
   - 构建业务知识库
   - 开发分析模板系统
   - 实现结果导出功能

## 技术栈

- FastAPI
- Pandas
- OpenAI API
- Redis
- SQLAlchemy
- Pydantic

## 项目状态说明

🟢 完成度 > 90%
🟡 完成度 40-90%
🟠 完成度 10-40%
🔴 尚未开始

## 下一步计划

1. 完善数据处理功能

   - 实现数据清洗
   - 添加数据转换
   - 扩展统计分析

2. 增强 LLM 交互

   - 添加重试机制
   - 优化提示词
   - 完善错误处理

3. 实现可视化支持

   - 设计图表推荐算法
   - 开发可视化配置生成
   - 集成图表库

4. 添加业务功能
   - 构建知识库
   - 开发分析模板
   - 实现导出功能
